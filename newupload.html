<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<meta name="google-site-verification" content="uwGK_wrZ8HW1YDPlIVdaqyOErueoMH5-9DF-fXL7uSc" />
<title>Upload a Mod | Bloxd World</title>
<meta name="description" content="Bloxd World is a community-driven modding site where you can upload, vote, and explore creative mods for Bloxd. Built by NeonJet Studios.">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="styles/earth-cube.css">
<link rel="stylesheet" href="styles/header.css">
<link rel="stylesheet" href="styles/devlogandindex.css">
<link rel="stylesheet" href="styles/other.css">
<link rel="stylesheet" href="styles/navbar.css"> 

<style>
.upload-container {
  max-width: 800px;
  margin: 40px auto;
  padding: 20px;
  background: white;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
  text-align: center;
}
.upload-container input[type="text"],
.upload-container input[type="file"],
.upload-container textarea,
.upload-container select {
  width: 90%;
  padding: 10px;
  margin: 10px 0;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.upload-container button {
  padding: 12px 25px;
  font-size: 1rem;
  border: none;
  border-radius: 6px;
  background-color: #1e88e5;
  color: white;
  cursor: pointer;
}
.upload-container button:hover {
  background-color: #1565c0;
}
</style>
</head>
<body>
<div class="modrinth-navbar">
  <div class="header">
    <div class="header-left">
      <div style="display: flex; align-items: center; height: 100%;">
        <div class="cube-container">
          <div class="cube">
            <div class="face front"></div>
            <div class="face back"></div>
            <div class="face right"></div>
            <div class="face left"></div>
            <div class="face top"></div>
            <div class="face bottom"></div>
          </div>
        </div>
      </div>
      <div class="logo-text"> Bloxd <br>World</div>
    </div>
    <div class="header-right">
      <ul class="navbar">
        <li class="nav-item"><a href="index.html"><i class="fas fa-home"></i><span class="nav-label">Home</span></a></li>
        <li class="nav-item"><a href="mods.html"><i class="fas fa-cubes"></i><span class="nav-label">Mods</span></a></li>
        <li class="nav-item"><a href="upload.html"><i class="fas fa-upload"></i><span class="nav-label">Upload</span></a></li>
        <li class="nav-item"><a href="about.html"><i class="fas fa-info-circle"></i><span class="nav-label">About</span></a></li>
        <li class="nav-item"><a href="leaderboard.html"><i class="fas fa-trophy"></i><span class="nav-label">Leaderboard</span></a></li>
        <li class="nav-item"><a href="#" id="themeToggle"><i class="fas fa-moon"></i><span class="nav-label">Theme</span></a></li>
        <li class="nav-item" id="authArea"></li>
      </ul>
    </div>
  </div>
</div>

<div class="upload-container">
  <h2>Upload Your Mod</h2>
  <input type="text" id="modTitle" placeholder="Enter Mod Title"><br>
  <textarea id="modDescription" placeholder="Enter Mod Description"></textarea><br>
  <input type="text" id="modImage" placeholder="Image URL"><br>
  <input type="text" id="modIcon" placeholder="Icon URL"><br>
  <input type="text" id="modAuthor" placeholder="Author Name"><br>
  <select id="modCategory">
    <option value="">Select Category</option>
    <option value="Gameplay">Gameplay</option>
    <option value="Visual">Visual</option>
    <option value="Utility">Utility</option>
    <option value="Other">Other</option>
  </select><br>
  <input type="file" id="modFile"><br>
  <button>Upload üî•</button>
  <p id="uploadStatus"></p>
</div>

<footer class="site-footer">
  <p>¬© NeonJet Studios. <strong>Bloxd World</strong> is made by NeonJet Studios and is not affiliated with Bloxd.io.</p>
  <nav class="footer-links">
    <a href="/about">About</a>
    <a href="/leaderboard">Leaderboard</a>
    <a href="/upload">Submit a Mod</a>
    <a href="https://discord.gg/yourserver" target="_blank">Join Discord (SOON)</a>
  </nav>
</footer>

<script type="module">
import { uploadMod, getUID } from './js/googlelogin.js';
document.addEventListener('DOMContentLoaded', () => {
  const uploadBtn = document.querySelector('.upload-container button');
  const status = document.getElementById('uploadStatus');

  uploadBtn.addEventListener('click', async () => {
    const { data: { session } } = await client.auth.getSession();
const user = session?.user;
if(!user.email) return status.textContent = 'You must be logged in to upload a mod!';
    const modData = {
      title: document.getElementById('modTitle').value,
      file: document.getElementById('modFile').files[0],
      description: document.getElementById('modDescription').value,
      image: document.getElementById('modImage').value,
      icon: document.getElementById('modIcon').value,
      author: document.getElementById('modAuthor').value,
      category: document.getElementById('modCategory').value,
      creatoruid:getUID(),
      info: { extra: "submitted via form" }
    };

    status.textContent = 'Uploading... ‚è≥';
    const result = await uploadMod(modData);

    if (result.error) status.textContent = '‚ùå ' + result.error;
    else status.textContent = '‚úÖ Upload successful!';
  });
});
</script>

<script>
if (/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
  document.body.classList.add("mobile");
}

const themeToggle = document.getElementById("themeToggle");
if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark-mode");

themeToggle.addEventListener("click", e => {
  e.preventDefault();
  document.body.classList.toggle("dark-mode");
  localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
});
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script type="module" src="js/googlelogin.js"></script>
</body> 
</html>

